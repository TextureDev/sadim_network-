<link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logo.png') }}">

{% extends "base.html" %}

{% block title %}ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… | Ø³Ø¯ÙŠÙ…{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
    /* --- ØªØ­Ø³ÙŠÙ†Ø§Øª Ø³Ø¯ÙŠÙ… Ù„ØµÙØ­Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ --- */
    .edit-user-container {
        max-width: 600px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ù†Ø¸Ø± */
        margin: 2rem auto;
        padding: 2rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(223, 182, 178, 0.1);
        border-radius: var(--radius);
        backdrop-filter: blur(15px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }

    .edit-title {
        color: var(--color-light);
        margin-bottom: 2rem;
        border-right: 5px solid var(--color-accent);
        padding-right: 1rem;
        font-size: 1.6rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .nebula-form-group {
        margin-bottom: 1.2rem;
        text-align: right;
    }

    .nebula-form-group label {
        display: block;
        color: var(--color-light);
        margin-bottom: 0.6rem;
        font-weight: 500;
        font-size: 0.9rem;
        opacity: 0.8;
    }

    .nebula-input, .nebula-select {
        width: 100%;
        padding: 0.9rem 1rem;
        background: rgba(25, 6, 31, 0.7);
        border: 1px solid rgba(223, 182, 178, 0.2);
        border-radius: 10px;
        color: var(--color-deep);
        outline: none;
        transition: var(--transition);
        font-family: inherit;
    }

    .nebula-input:focus, .nebula-select:focus {
        border-color: var(--color-accent);
        box-shadow: 0 0 15px rgba(133, 79, 108, 0.3);
        background: rgba(43, 18, 76, 0.4);
    }

    /* ØªØ­Ø³ÙŠÙ† Ø´ÙƒÙ„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
    .nebula-select option {
        background: #19061f;
        color: white;
        padding: 10px;
    }

    /* Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± - Ù…Ø±Ù†Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
    .btn-group {
        display: flex;
        gap: 1rem;
        margin-top: 2.5rem;
    }

    .btn-save {
        background: var(--color-accent);
        color: white;
        border: none;
        padding: 0.9rem 2rem;
        border-radius: 50px;
        font-weight: 700;
        cursor: pointer;
        transition: var(--transition);
        flex: 2; /* Ø§Ù„Ø²Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø£ÙƒØ¨Ø± */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .btn-save:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(133, 79, 108, 0.4);
        background: #9a5f7e;
    }

    .btn-cancel {
        background: rgba(255, 255, 255, 0.05);
        color: var(--color-light);
        text-decoration: none;
        padding: 0.9rem 1.5rem;
        border-radius: 50px;
        text-align: center;
        border: 1px solid rgba(223, 182, 178, 0.2);
        transition: var(--transition);
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .btn-cancel:hover {
        background: rgba(214, 48, 49, 0.1);
        color: #ff7675;
        border-color: #ff7675;
    }

    /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ */
    @media (max-width: 600px) {
        .edit-user-container {
            margin: 1rem;
            padding: 1.5rem;
            border: none;
            background: rgba(255, 255, 255, 0.02);
        }
        .btn-group {
            flex-direction: column; /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙˆÙ‚ Ø¨Ø¹Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ù„Ù…Ø³ */
        }
        .btn-save, .btn-cancel {
            width: 100%;
            padding: 1.1rem;
        }
    }
</style>

<div class="edit-user-container">
    <h2 class="edit-title">
        <i class="fas fa-user-edit"></i> ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {{ user.username }}
    </h2>
    
    <form method="POST">
        <div class="nebula-form-group">
            <label for="name"><i class="fas fa-id-card"></i> Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
            <input type="text" class="nebula-input" id="name" name="name" value="{{ user.name }}" required>
        </div>

        <div class="nebula-form-group">
            <label for="email"><i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input type="email" class="nebula-input" id="email" name="email" value="{{ user.email }}" required>
        </div>

        <div class="nebula-form-group">
            <label for="password"><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input type="password" class="nebula-input" id="password" name="password" placeholder="Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ø¹Ø¯Ù… Ø§Ù„ØªØºÙŠÙŠØ±">
        </div>

        <div class="nebula-form-group">
            <label for="role"><i class="fas fa-user-tag"></i> Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</label>
            <select class="nebula-select" id="role" name="role">
                <option value="user" {% if user.role == 'user' %}selected{% endif %}>ğŸ‘¤ Ù…Ø³ØªØ®Ø¯Ù…</option>
                <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>ğŸ›¡ï¸ Ø£Ø¯Ù…Ù† (Ù…Ø¯ÙŠØ± Ù†Ø¸Ø§Ù…)</option>
            </select>
        </div>

        <div class="nebula-form-group">
            <label for="status"><i class="fas fa-toggle-on"></i> Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</label>
            <select class="nebula-select" id="status" name="status">
                <option value="active" {% if user.status == 'active' %}selected{% endif %}>ğŸŸ¢ Ù†Ø´Ø· (Active)</option>
                <option value="suspended" {% if user.status == 'suspended' %}selected{% endif %}>ğŸŸ¡ Ù…Ø¹Ù„Ù‚ (Suspended)</option>
                <option value="deleted" {% if user.status == 'deleted' %}selected{% endif %}>ğŸ”´ Ù…Ø­Ø°ÙˆÙ (Soft Delete)</option>
            </select>
        </div>

        <div class="btn-group">
            <button type="submit" class="btn-save">
                <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            </button>
            <a href="{{ url_for('admin.admin_users_list') }}" class="btn-cancel">
                Ø¥Ù„ØºØ§Ø¡
            </a>
        </div>
    </form>
</div>
{% endblock %}